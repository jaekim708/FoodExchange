<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html>
<head>
  <meta name="generator" content="Bluefish 2.2.5" >
  <meta>

  <title>My Parse App</title>
  <meta name="description" content="My Parse App">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/reset.css" type="text/css">
  <link rel="stylesheet" href="css/styles.css" type="text/css">
  <script type="text/javascript" src=
  "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
</script>
  <script type="text/javascript" src=
  "http://www.parsecdn.com/js/parse-1.3.4.min.js">
</script>
  <style type="text/css">
div.c1 {display:none}
  </style>
</head>


<body>

<style type="text/css">
body {background-color:ffffff;background-image:url(http://www.cohabitaire.com/wp-content/uploads/2013/06/Cohabitaire-RawFood-05.jpg);background-repeat:no-repeat;background-position:bottom center;background-attachment:fixed;}
h1{text-align:center;font-family:Cursive;color:000000;}
p {text-align:center;font-family:Cursive;font-size:18px;font-style:normal;font-weight:normal;font-variant:small-caps;color:000000;}

</style>

<h1>We find the nearest available food for you! =)</h1>
<p>too lazy to make your own fucking food? we got you man</p>
  
    <p style="text-align:right;">List of food below</p>

    <form method="link" action="host.html">
      <p style="text-align:right;"><input type="submit" value="Selling food"></p>
    </form>

		<ol id="hosts"></ol>
		
  <script type="text/javascript">
	  	document.write("WORK");
  		Parse.initialize("TnvJePY5vT2oSuP3VgWsO8OTWfwZO2rMX0ZdwvRIh", "moibVX5koKKKLKGvMmavEGVDkvZ3lVfWw9x23cIt");
		PFQuery *query = [PFQuery queryWithClassName:@"Hosts"];
  		[query findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {
  			if (!error) {
				objects.sort(compare);		
				var hosts =	document.getElementById('hosts');
	  			document.write("WORK");
	  			for(var i = 0; i < objects.length; i++){
					var entry = document.createElement('li');
					entry.appendChild(document.createTextNode(objects[i].HostName));
					hosts.appendChild(entry);
	  			}
	  		
 			} else {
  	  		// Log details of the failure
  	  	 		document.write("ERROR");
  	  			NSLog(@"Error: %@ %@", error, [error userInfo]);
			}
			function compare(a, b){
				if(a.DistanceToMe < b.DistanceToMe)
					return -1;
				if(a.DistanceToMe > b.DistanceToMe)
					return 1;
				return 0;			
			}
		}];
  </script>
</body>
</html>
